<!DOCTYPE html>

<html>

    <head>


        <script type="text/javascript">

            const FunctionWorkerExecutor = {

                execute: function(fn, param) {

                    return new Promise(resolve => {

                        var paramStr = ``;
                        if(param) {
                            paramStr = JSON.stringify(param);
                        }

                        const fnString = `
                            ((${fn.toString()})(${paramStr})).then(function(r) { postMessage(r); });
                        `;

                        const workerFuncUrl = URL.createObjectURL(new Blob([ fnString ]));
                        const worker = new Worker(workerFuncUrl);

                        worker.onmessage = function(msg) {
                            resolve(msg.data);
                        };

                    });
                }

            };


            FunctionWorkerExecutor.execute(
                function(input) {
                    return new Promise((resolve) => {
                        resolve(`${input.data}:` + Math.random());
                    }); 
                },
                {
                    "data": "prefix"
                }
            ).then((r) => {
                console.log(r);    
            });

        </script>

    </head>


    <body>


    </body>

</html>